import requests
import pandas as pd

# Tu clave API de Elsevier
API_KEY = '993c470a9bd8d545222e8e7bc115ea1e'

# Función para hacer solicitudes a la API de Elsevier
def make_request(query, api_key, start=0, count=25):
    url = "https://api.elsevier.com/content/search/scopus"
    headers = {
        "Accept": "application/json",
        "X-ELS-APIKey": api_key
    }
    params = {
        "query": query,
        "start": start,
        "count": count
    }
    response = requests.get(url, headers=headers, params=params)
    if response.status_code == 200:
        return response.json()
    else:
        print(f"Error: {response.status_code}")
        return None

# Función para extraer datos relevantes de la respuesta JSON
def extract_data(json_data):
    entries = json_data['search-results']['entry']
    data = []
    for entry in entries:
        doi = entry.get('prism:doi', 'No DOI')
        data.append({
            'DOI': doi
        })
    return data

# Búsqueda de artículos relacionados con "bioimpresión"
query = "BioPrinting"

# Hacer la solicitud inicial
response_json = make_request(query, API_KEY)

# Extraer los datos
if response_json:
    data = extract_data(response_json)
    df = pd.DataFrame(data)
    df.to_csv('bioimpression_articles.csv', index=False)
    print("Datos guardados en 'bioimpression_articles.csv'.")
else:
    print("No se pudo obtener datos de la API.")
